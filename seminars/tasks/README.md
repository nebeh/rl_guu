# Задача: научить агента (алгоритм RL) получать прибыль на финансовых рынках. 

## Алгоритмы: Deep Q Learning, Double Deep Q learning, Cross-Entropy, Policy Gradient, Actor-Critic

### Исходные данные (в файле DATA_RL_DL)
Папка task (в архиве DATA_RL_DL):  
Фьючерсы на биткоин и nasdaq с таймфреймом 1 день и 1 минута, т.е. 4 набора данных с полями open, high, low, close, volume, atr (atr - это волатильность (дисперсия) за последние 14 временных промежутков)   
- Дневные занные - за 20 лет (примерно 5 000 свечей)
- Минутные данные порядка 20 000 свечей (минут) или приблизительно пол года.

Папка add_task также содержит дневные и минутные данные для дополнительной проверки алгоритмов (в некоторых случаях имеет смысл убедиться что алгоритм глобально работатет/не работает или выдает случайный результат)

В процессе передачи данных в алгоритм не забывайте их нормировать

### Задача
Разбить данные на train и val в соотношении 80/20 (80/20 - это гиперпараметр, можно разбить в соотношении 70/30 или 90/10 и т.д) скользящим окном. Что значит со скользящим окном. Допустим у вас данные за пол года, с 1 января по 1 июля 2024 года. Вы берете 4 недели данных, с 1 по 28 января, обучаете алгоритм (один или несколько из перечисленных выше) на этих данных (это трейн), затем с 29 января 1 неделю торгуете (без обучения), т.е. примеряете обученный алгоритм, получаете доходность, записываете ее в память. Далее, двигаемся на одну неделю вперед. Теперь трейн - это данные с 8 января по 4 февраля, валидация с 5 по 11 февраля и т.д.
Результат: доходность и коэф Шарпа на данных валидации
Доходность $R$   - это сумма прибыли в процентах по отношению к начальному капиталу, которые получены на тесте
Коэф Шарпа - это отношение доходности к риску см  [здесь](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D1%8D%D1%84%D1%84%D0%B8%D1%86%D0%B8%D0%B5%D0%BD%D1%82_%D0%A8%D0%B0%D1%80%D0%BF%D0%B0#:~:text=%D0%9A%D0%BE%D1%8D%D1%84%D1%84%D0%B8%D1%86%D0%B8%D0%B5%D0%BD%D1%82%20%D0%A8%D0%B0%D1%80%D0%BF%D0%B0%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B5%D1%82%D1%81%D1%8F%20%D0%B4%D0%BB%D1%8F%20%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F,%D0%BA%D0%BE%D1%8D%D1%84%D1%84%D0%B8%D1%86%D0%B8%D0%B5%D0%BD%D1%82%D0%BE%D0%BC%20%D0%A8%D0%B0%D1%80%D0%BF%D0%B0%20%D0%B1%D1%83%D0%B4%D0%B5%D1%82%20%D0%BC%D0%B5%D0%BD%D0%B5%D0%B5%20%D1%80%D0%B8%D1%81%D0%BA%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC.). Где Rf считаем константой.

### Гиперпараметры
Результаты стратегии будут зависеть от гиперпараметров системы, один из них - отношение размеров трейна к валидации описан выше. Какие еще могут быть гиперпараметры (примеры) от которых зависят результаты:
- архитектура НС
- количество данных временного ряда, которые вы подаете в НС
- выделенные характеристики временного ряда (которые можно подавать вместе или вместо временного ряда)

В целом, надо проявить смекалку, чтобы получить результат. Например, торговать на основе скользящей средней, а параметры скользящей средней находить с помощью RL.


## Контест
Зачтено, если доходность R>0 на тестах  

### Бонусная система
Для получения бонусов необходимо, чтобы на тесте:  
а) доходность > 15% годовых  
б) коэф Шарпа > 1.5 (за период тестирования)  

#### Бонусы  
- +1 балл на экзамен
- Стратегия получает в управление не менее 50К$ и эта сумма может быть значительно увеличена в зависимости от результатов теста. Стратегия (разработчик) получает 10% (*)  от прибыли по стратегии
- Возможность попробовать свои силы в алгоритмизации стратегий, посмотреть на  себя в роли кванта 
- Поработать в западном инвестиционном фонде (молодой начинающий фонд)

#### (*) Описание монетизации. 
Поскольку фьючерсные контракты (nasdaq, bitcoin etc) торгуются с плечами, то доходность от суммы 50$ с показателем 15% годовых не равна 7.5K $. Эта доходность будет формироваться из отношения доходности к метрике риска. Если риск нулевой, тогда доходность будет 50 * 0.15 * 20 (плечо) = 150 K. Размер рисков будет определяться по заранее выбранной схеме Монте-Карло расчета рисков. Другими словами, размер плеча будет варьироваться в зависимости от рисков и будет составлять от 3 до 20.   
Стоимость сделки (штраф или в контексте RL - reward за одну покупку или продажу) составляет для:  
- Nasdaq: 5$
- BTC: 15$




